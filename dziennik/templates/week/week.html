{% extends 'base.html' %}
{% load static %}
{% block content %}
	{% if user.username == '' %}
		<meta http-equiv="refresh" content="0; URL=/login/" />
	{% endif %}
	<head>
		<title>Tydzien | {{ user.first_name }} {{ user.last_name }}</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="{% static 'lib/jquery/jquery.js' %}"></script>
		<script src="{% static 'lib/jquery/jquery.slim.js' %}"></script>
		<script src="{% static 'lib/bootstrap/bootstrap.js' %}"></script>
		<link href="{% static 'css/main.css' %}" rel="stylesheet">    
	</head>
	<div class="myform form shadow-lg">
		<nav class="mb-1 navbar navbar-expand-lg navbar-light default-color shadow-lg custom-nav">
			<ul class="navbar-nav ml-auto nav-flex-icons">
				<li class="nav-item avatar">
					<a class="nav-link p-0" href="#">
						<img src="{% static 'img/man.svg' %}" class="rounded-circle z-depth-0 bg-profile float-left" alt="avatar image" width="15%">
						<span class="align-bottom" style="line-height: 0;"><font class="font-weight-bold pl-2" color="black" size="4">{{ user.first_name }} {{ user.last_name }}</font></br><font class="text-silver pl-2"  size="2">{{ user.email }}</font></span>
					</a>
				</li>
			</ul>	
			<div class="collapse navbar-collapse" id="navbarSupportedContent-333">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-333" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="navbar-toggler-icon"></span></a>
						<div class="dropdown-menu  dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink-333">
							{% if user.admin %}
							<a class="dropdown-item" href="panel/admin/" id="panelAdmin">Panel Administracyjny</a>
							{% endif %}
							{% if user.role == 'Institution' %}
							<a class="dropdown-item" href="{% url 'newactivity' %}" id="newactivity">Stwórz zajęcia</a>
							<a class="dropdown-item" href="{% url 'newemployee' %}" id="newemployee">Dodaj pracownika</a>
							{% endif %}
							{% if user.role == 'User' %}
							<a class="dropdown-item" href="{% url 'newchild' %}" id="newchild">Stwórz profil dziecka</a>
							{% endif %}
							<a class="dropdown-item" href="#">Ustawienia</a>
							<a class="dropdown-item" href="{% url 'logout' %}">Wyloguj</a>
						</div>
					</li>
				</ul>
			</div>
		</nav>
		<div class="btn-group btn-group-toggle" data-toggle="buttons">
			<label class="btn btn-primary">
				<input type="radio" name="options" id="option1" autocomplete="off"> Dzień
			</label>
			<label class="btn btn-primary active">
				<a href ="{% url 'week_list' %}" style="color:white;"><input type="radio" name="options" id="option2" autocomplete="off" checked>Tydzień</a> 
			</label>
			<label class="btn btn-primary">
				<a href ="{% url 'main' %}" style="color:white;"><input type="radio" name="options" id="option3" autocomplete="off"> Miesiąc</a> 
			</label>
		</div>
        <div class="days">
			<span class="weekDayDisplay" style="grid-column-start: 1; grid-row-start: 1;">Pn</span>
			<span class="weekDayDisplay" style="grid-column-start: 1; grid-row-start: 2;">Wt</span>
			<span class="weekDayDisplay" style="grid-column-start: 1; grid-row-start: 3;">Śr</span>
			<span class="weekDayDisplay" style="grid-column-start: 1; grid-row-start: 4;">Cz</span>
			<span class="weekDayDisplay" style="grid-column-start: 1; grid-row-start: 5;">Pt</span>
			<span class="weekDayDisplayWeekend" style="grid-column-start: 1; grid-row-start: 6;" class="weekend">Sb</span>
			<span class="weekDayDisplayWeekend" style="grid-column-start: 1; grid-row-start: 7;" class="weekend">Nd</span>
			<!--<span>
				{% for podgl in podglad%}
					<span>{{podgl.data_rozpoczecia}}</span>
					<span>{{podgl.godzina_rozpoczecia}}</span>
					<span>{{podgl.prowadzacy}}</span>
					<span>{{podgl.nazwa}}</span>
					<span>{{podgl.day}}</span>			
				{% endfor %}
			</span>-->
			<script>
				var x = 0;
				var pn=2;
				var wt =2;
				var sr=2;
				var cz=2;
				var pt=2;
				var sob=2;
				var nd=2;
				function wyswietl(podglad,x,dzien){
					console.log(podglad);
					var days = document.querySelector(".days");
					var spanik = document.createElement("span");
					spanik.style.gridRowStart = dzien+1;
					if(dzien==0){
						spanik.style.gridColumnStart = pn;
						pn+=3;
					}
					if(dzien==1){
						spanik.style.gridColumnStart = wt;
						wt+=3;
					}
					if(dzien==2){
						spanik.style.gridColumnStart = sr;
						sr+=3;
					}
					if(dzien==3){
						spanik.style.gridColumnStart = cz;
						cz+=3;
					}
					if(dzien==4){
						spanik.style.gridColumnStart = pt;
						pt+=3;
					}
					if(dzien==5){
						spanik.style.gridColumnStart = sob;
						sob+=3;
					}
					if(dzien==6){
						spanik.style.gridColumnStart = nd;
						nd+=3;
					}
					spanik.style.gridColumnEnd = parseInt(spanik.style.gridColumnStart) + 3;
					spanik.style.width = "calc(100% - 1rem)";
					spanik.style.backgroundColor = "rgba(0, 123, 255,1)";
					spanik.style.borderRadius =  "1rem";
					spanik.style.margin =  "0.5rem";
					spanik.style.padding =  "1rem";
					spanik.style.color =  "white";
					for(let informacja in podglad){
						var myJavaScriptVariable = podglad[informacja];
						spanik.innerHTML += myJavaScriptVariable;
					}
					days.appendChild(spanik);
					console.log(myJavaScriptVariable);
					x++;
				}
			</script>
			{% for podgla in filtr %}
				<script type="text/javascript">
					wyswietl(["<font size='3'>{{podgla.nazwa}}</font><br/><font size='2'><i>{{podgla.child}}</i></font><br/>", "<font size='2'>od</font> {{podgla.godzina_rozpoczecia}}", " <font size='2'>do</font> {{podgla.godzina_zakonczenia}}"],x,{{podgla.day}})
				</script>
			{% endfor %}
		</div>
    </div> 
{% endblock %}